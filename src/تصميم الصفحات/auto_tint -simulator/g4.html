
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOPSHIELD - متجر التظليل الرائد</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #F8F9FA;
        }
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ts-blue': '#102E6A',
                        'ts-blue-dark': '#0A2351',
                        'ts-gold': '#FFC107',
                        'ts-light-gold': '#FFF8E1',
                        'ts-gray': {
                            50: '#F9FAFB',
                            100: '#F3F4F6',
                            200: '#E5E7EB',
                            300: '#D1D5DB',
                            400: '#9CA3AF',
                            500: '#6B7280',
                            600: '#4B5563',
                            700: '#374151',
                            800: '#1F2937',
                            900: '#111827',
                        },
                    }
                }
            }
        }

        .selected-vehicle {
            border-color: tailwind.theme.colors['ts-gold'] !important;
            background-color: tailwind.theme.colors['ts-light-gold'] !important;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.25);
            transform: translateY(-2px);
        }
        .selected-vehicle img {
            filter: none;
            opacity: 1;
        }
        .selected-vehicle .vehicle-name {
            color: tailwind.theme.colors['ts-blue-dark'];
            font-weight: 700;
        }
        .selected-tint {
            border-color: tailwind.theme.colors['ts-blue'] !important; 
            background-color: #EBF4FF !important;
            box-shadow: 0 2px 8px rgba(16, 46, 106, 0.2);
            transform: translateY(-1px);
        }
        .selected-tint .tint-value {
            color: tailwind.theme.colors['ts-blue-dark'];
            font-weight: 700;
        }
        .vlt-description-display.visible {
            opacity: 1;
            max-height: 100px; 
            margin-top: 0.375rem;
            padding: 0.5rem 0.75rem;
            font-size: 0.75rem;
            background-color: #EFF6FF;
            border-radius: 0.375rem;
            color: #374151;
        }
        .btn-next {
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
        }
        .btn-next .arrow-icon {
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        html[dir="rtl"] .btn-next:hover:not(:disabled) .arrow-icon {
            transform: translateX(5px);
        }
        html[dir="ltr"] .btn-next:hover:not(:disabled) .arrow-icon {
            transform: translateX(-5px);
        }
        .btn-next:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(16, 46, 106, 0.2);
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        #alert-message-container {
            position: fixed; top: 20px; left: 50%;
            transform: translateX(-50%); z-index: 1000;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .alert-message {
            padding: 0.875rem 1.25rem; border-radius: 0.5rem;
            font-weight: 600; font-size: 0.875rem; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); 
        }
        .alert-error {
            background-color: #FFF1F2; color: #E11D48; border: 1px solid #FECDD3; 
        }
         .alert-success { 
            background-color: #F0FDF4; color: #16A34A; border: 1px solid #BBF7D0; 
        }
        .tint-button .tint-square { 
            width: 36px; 
            height: 30px; 
            margin-bottom: 0.25rem; 
            border-radius: 0.375rem;
            border: 1px solid #D1D5DB;
            background-clip: padding-box; 
            transition: transform 0.2s ease;
        }
        .tint-button:hover .tint-square {
            transform: scale(1.05);
        }
        .controls-area {
            max-height: calc(100vh - 4rem - 2.5rem);
        }
        .control-section > h3 {
            color: tailwind.theme.colors['ts-blue-dark'];
            border-bottom-width: 2px;
            border-color: tailwind.theme.colors['ts-blue'];
            padding-bottom: 0.5rem;
            margin-bottom: 0.75rem;
        }
        .glass-tint-section h4 {
            color: tailwind.theme.colors['ts-gray'][700];
        }
        .vlt-select {
            border-color: tailwind.theme.colors['ts-gray'][300];
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .vlt-select:focus {
            border-color: tailwind.theme.colors['ts-blue'];
            box-shadow: 0 0 0 2px rgba(16, 46, 106, 0.2);
            outline: none;
        }
        
        /* New section styles */
        .feature-section {
            background: linear-gradient(135deg, #0A2351 0%, #102E6A 100%);
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin-top: 2rem;
        }
        .feature-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 2px solid rgba(255, 193, 7, 0.3);
        }
        .feature-tab {
            flex: 1;
            text-align: center;
            padding: 1.25rem 0.5rem;
            font-weight: 700;
            color: #FFF;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            font-size: 1rem;
        }
        .feature-tab:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        .feature-tab.active {
            color: #FFC107;
            background: rgba(255, 255, 255, 0.2);
        }
        .feature-tab.active:after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background: #FFC107;
        }
        .feature-content {
            padding: 2rem;
            color: #FFF;
            display: none;
        }
        .feature-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .feature-icon {
            background: rgba(255, 193, 7, 0.1);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 1.5rem;
            color: #FFC107;
        }
        .feature-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-align: center;
            color: #FFC107;
        }
        .feature-description {
            text-align: center;
            line-height: 1.7;
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.05rem;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        .feature-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease, background 0.3s ease;
        }
        .feature-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-5px);
        }
        .feature-card .icon {
            color: #FFC107;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .feature-card h4 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: #FFC107;
        }
        .feature-card p {
            color: #E5E7EB;
            line-height: 1.6;
        }
        .price-display {
            background: linear-gradient(135deg, #FFC107 0%, #FF9800 100%);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-top: 1.5rem;
            animation: pulse 2s infinite;
        }
        .price-display.hidden {
            display: none;
        }
        .price-display h3 {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            color: #0A2351;
        }
        .price-display p {
            font-size: 1.1rem;
            font-weight: 600;
            color: #102E6A;
            margin-bottom: 0;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 193, 7, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0); }
        }
        
        /* Action buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            justify-content: center;
        }
        .action-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.25rem;
            border-radius: 8px;
            font-weight: 700;
            transition: all 0.3s ease;
            text-align: center;
        }
        .buy-now-btn {
            background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            color: white;
            box-shadow: 0 4px 6px rgba(34, 197, 94, 0.3);
        }
        .buy-now-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(34, 197, 94, 0.4);
        }
        .add-to-cart-btn {
            background: linear-gradient(135deg, #102E6A 0%, #0A2351 100%);
            color: white;
            box-shadow: 0 4px 6px rgba(16, 46, 106, 0.3);
        }
        .add-to-cart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(16, 46, 106, 0.4);
        }
        
        /* Gallery section */
        .gallery-section {
            background-color: #fff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
            margin-top: 3rem;
            margin-bottom: 3rem;
        }
        .gallery-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .gallery-header h2 {
            font-size: 2rem;
            font-weight: 800;
            color: #102E6A;
            margin-bottom: 1rem;
            position: relative;
            display: inline-block;
        }
        .gallery-header h2:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #102E6A, #FFC107);
            border-radius: 2px;
        }
        .gallery-header p {
            color: #6B7280;
            max-width: 700px;
            margin: 0 auto;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        .gallery-item {
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            height: 250px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 1.5rem 1rem 1rem;
            color: white;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        .gallery-item:hover .gallery-overlay {
            transform: translateY(0);
        }
        .gallery-overlay h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        .gallery-overlay p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* Trust badges */
        .trust-badges {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        .trust-badge {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: #F3F4F6;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            color: #374151;
        }
        .trust-badge i {
            color: #FFC107;
            font-size: 1.2rem;
        }
        
        /* Floating cart */
        .floating-cart {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #102E6A;
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .floating-cart:hover {
            transform: translateY(-5px);
            background: #0A2351;
        }
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #FFC107;
            color: #0A2351;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
        }
        
        /* Customer reviews */
        .reviews-section {
            background-color: #f9fafb;
            padding: 3rem 2rem;
            margin-top: 3rem;
            border-radius: 1.5rem;
        }
        .review-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        .review-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .review-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #102E6A;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }
        .review-stars {
            color: #FFC107;
            margin-top: 0.5rem;
        }
        .review-content {
            line-height: 1.6;
            color: #4B5563;
        }
    </style>
</head>
<body class="bg-ts-gray-50 text-ts-gray-800">
    <div id="alert-message-container" class="opacity-0 transform -translate-y-10"></div>
    
    <!-- Floating cart button -->
    <div class="floating-cart">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count">0</span>
    </div>

    <div class="simulator-container flex flex-col min-h-screen">
        <header class="bg-ts-blue text-white shadow-md sticky top-0 z-50 h-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-full">
                    <a href="#" class="logo-link">
                        <img src="https://assets.stickpng.com/images/580b57fcd9996e24bc43c521.png" alt="شعار Topshield" class="header-logo h-8 sm:h-9 object-contain">
                    </a>
                    <nav class="hidden md:flex space-x-reverse space-x-3">
                        <a href="#" class="hover:text-ts-gold transition-colors duration-200 px-3 py-2 rounded-md text-sm font-medium">الصفحة الرئيسية</a>
                        <a href="#" class="hover:text-ts-gold transition-colors duration-200 px-3 py-2 rounded-md text-sm font-medium">عنا</a>
                        <a href="#" class="text-ts-gold font-semibold border-b-2 border-ts-gold px-3 py-2 text-sm">العازل الحراري للسيارات</a>
                        <a href="#" class="hover:text-ts-gold transition-colors duration-200 px-3 py-2 rounded-md text-sm font-medium">أفلام حماية الطلاء</a>
                        <a href="#" class="hover:text-ts-gold transition-colors duration-200 px-3 py-2 rounded-md text-sm font-medium">افلام الحماية الملونة</a>
                    </nav>
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="text-white hover:text-ts-gold focus:outline-none">
                            <i class="fas fa-bars text-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div id="mobile-menu" class="md:hidden hidden bg-ts-blue-dark shadow-lg">
                <a href="#" class="block hover:bg-ts-blue px-4 py-3 text-sm font-medium text-center">الصفحة الرئيسية</a>
                <a href="#" class="block hover:bg-ts-blue px-4 py-3 text-sm font-medium text-center">عنا</a>
                <a href="#" class="block bg-ts-blue text-ts-gold font-semibold px-4 py-3 text-sm text-center">العازل الحراري للسيارات</a>
                <a href="#" class="block hover:bg-ts-blue px-4 py-3 text-sm font-medium text-center">أفلام حماية الطلاء</a>
                <a href="#" class="block hover:bg-ts-blue px-4 py-3 text-sm font-medium text-center">افلام الحماية الملونة</a>
            </div>
        </header>

        <main class="simulator-body container mx-auto p-3 md:p-4 lg:px-6 lg:py-5 flex flex-col lg:flex-row gap-5 flex-grow">
            <aside class="controls-area lg:w-5/12 xl:w-4/12 bg-white p-4 rounded-xl shadow-xl order-2 lg:order-1 overflow-y-auto no-scrollbar">
                <section class="control-section mb-4"> 
                    <h3 class="text-base font-bold">1. اختر نوع المركبة</h3> 
                    <div class="vehicle-type-options grid grid-cols-4 gap-2 mt-2.5"> 
                        <div class="vehicle-option flex flex-col items-center p-2.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-gold hover:bg-ts-light-gold transition-all duration-200 ease-in-out" data-car-name="رياضية" data-preview-image="https://placehold.co/800x500/e0e0e0/333?text=سيارة+رياضية&font=cairo" onclick="selectCar('رياضية', this.dataset.previewImage, this)">
                            <img loading="lazy" src="https://placehold.co/70x45/cccccc/555555?text=رياضية&font=cairo" alt="رياضية" class="w-16 h-10 object-contain mb-1 filter grayscale opacity-70 group-hover:opacity-100 group-hover:filter-none transition-all duration-200" onerror="this.src='https://placehold.co/70x45/e9ecef/212529?text=رياضية&font=cairo'; this.onerror=null;">
                            <span class="vehicle-name text-xs font-semibold text-ts-gray-600">رياضية</span>
                        </div>
                        <div class="vehicle-option flex flex-col items-center p-2.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-gold hover:bg-ts-light-gold transition-all duration-200 ease-in-out" data-car-name="سيدان" data-preview-image="https://placehold.co/800x500/e0e0e0/333?text=سيارة+سيدان&font=cairo" onclick="selectCar('سيدان', this.dataset.previewImage, this)">
                            <img loading="lazy" src="https://placehold.co/70x45/cccccc/555555?text=سيدان&font=cairo" alt="سيدان" class="w-16 h-10 object-contain mb-1 filter grayscale opacity-70 group-hover:opacity-100 group-hover:filter-none transition-all duration-200" onerror="this.src='https://placehold.co/70x45/e9ecef/212529?text=سيدان&font=cairo'; this.onerror=null;">
                            <span class="vehicle-name text-xs font-semibold text-ts-gray-600">سيدان</span>
                        </div>
                        <div class="vehicle-option flex flex-col items-center p-2.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-gold hover:bg-ts-light-gold transition-all duration-200 ease-in-out" data-car-name="عائلية/دفع رباعي" data-preview-image="https://placehold.co/800x500/e0e0e0/333?text=SUV&font=cairo" onclick="selectCar('عائلية/دفع رباعي', this.dataset.previewImage, this)">
                            <img loading="lazy" src="https://placehold.co/70x45/cccccc/555555?text=SUV&font=cairo" alt="عائلية/دفع رباعي" class="w-16 h-10 object-contain mb-1 filter grayscale opacity-70 group-hover:opacity-100 group-hover:filter-none transition-all duration-200" onerror="this.src='https://placehold.co/70x45/e9ecef/212529?text=SUV&font=cairo'; this.onerror=null;">
                            <span class="vehicle-name text-xs font-semibold text-ts-gray-600">عائلية/دفع رباعي</span>
                        </div>
                        <div class="vehicle-option flex flex-col items-center p-2.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-gold hover:bg-ts-light-gold transition-all duration-200 ease-in-out" data-car-name="شاحنة" data-preview-image="https://placehold.co/800x500/e0e0e0/333?text=شاحنة&font=cairo" onclick="selectCar('شاحنة', this.dataset.previewImage, this)">
                            <img loading="lazy" src="https://placehold.co/70x45/cccccc/555555?text=شاحنة&font=cairo" alt="شاحنة" class="w-16 h-10 object-contain mb-1 filter grayscale opacity-70 group-hover:opacity-100 group-hover:filter-none transition-all duration-200" onerror="this.src='https://placehold.co/70x45/e9ecef/212529?text=شاحنة&font=cairo'; this.onerror=null;">
                            <span class="vehicle-name text-xs font-semibold text-ts-gray-600">شاحنة</span>
                        </div>
                    </div>
                </section>

                <section class="control-section mb-4"> 
                    <h3 class="text-base font-bold">2. اختر المظهر العام <span class="text-sm font-normal text-ts-gray-500">(VLT)</span></h3> 
                    <p id="tintLabel" class="text-xs text-ts-gray-600 mt-1.5 mb-2 text-center"></p> 
                    <div class="tint-percentage-options flex flex-row flex-nowrap gap-1.5 overflow-x-auto py-1.5 no-scrollbar"> 
                        <div class="tint-button flex flex-col items-center p-1.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-blue transition-all duration-200 ease-in-out flex-shrink-0" data-vlt="0.05" onclick="selectTint(0.05, this)">
                            <div class="tint-square" style="background-color: rgba(0,0,0,0.95);"></div><span class="tint-value text-xs">5%</span>
                        </div>
                        <div class="tint-button flex flex-col items-center p-1.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-blue transition-all duration-200 ease-in-out flex-shrink-0" data-vlt="0.15" onclick="selectTint(0.15, this)">
                            <div class="tint-square" style="background-color: rgba(0,0,0,0.85);"></div><span class="tint-value text-xs">15%</span>
                        </div>
                         <div class="tint-button flex flex-col items-center p-1.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-blue transition-all duration-200 ease-in-out flex-shrink-0" data-vlt="0.25" onclick="selectTint(0.25, this)">
                            <div class="tint-square" style="background-color: rgba(0,0,0,0.75);"></div><span class="tint-value text-xs">25%</span>
                        </div>
                        <div class="tint-button flex flex-col items-center p-1.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-blue transition-all duration-200 ease-in-out flex-shrink-0" data-vlt="0.35" onclick="selectTint(0.35, this)">
                            <div class="tint-square" style="background-color: rgba(0,0,0,0.65);"></div><span class="tint-value text-xs">35%</span>
                        </div>
                        <div class="tint-button flex flex-col items-center p-1.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-blue transition-all duration-200 ease-in-out flex-shrink-0" data-vlt="0.50" onclick="selectTint(0.50, this)">
                            <div class="tint-square" style="background-color: rgba(0,0,0,0.50);"></div><span class="tint-value text-xs">50%</span>
                        </div>
                        <div class="tint-button flex flex-col items-center p-1.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-blue transition-all duration-200 ease-in-out flex-shrink-0" data-vlt="0.70" onclick="selectTint(0.70, this)">
                            <div class="tint-square" style="background-color: rgba(0,0,0,0.30);"></div><span class="tint-value text-xs">70%</span>
                        </div>
                        <div class="tint-button flex flex-col items-center p-1.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-blue transition-all duration-200 ease-in-out flex-shrink-0" data-vlt="0.80" onclick="selectTint(0.80, this)">
                            <div class="tint-square" style="background-color: rgba(0,0,0,0.20);"></div><span class="tint-value text-xs">80%</span>
                        </div>
                        <div class="tint-button flex flex-col items-center p-1.5 border-2 border-ts-gray-200 rounded-lg cursor-pointer bg-ts-gray-50 hover:border-ts-blue transition-all duration-200 ease-in-out flex-shrink-0" data-vlt="1.00" onclick="selectTint(1.00, this)">
                            <div class="tint-square" style="background-color: rgba(0,0,0,0.0);"></div><span class="tint-value text-xs">بدون</span>
                        </div>
                    </div>
                </section>

                <section class="control-section detailed-tint-selection mb-4"> 
                    <h3 class="text-base font-bold">3. اختر درجة التظليل المفضلة لديك <span class="text-sm font-normal text-ts-gray-500">(لكل زجاج)</span></h3> 
                    
                    <div class="glass-tint-section mt-2.5 mb-2 pb-2 border-b border-ts-gray-200" id="windshield-section"> 
                        <div class="flex justify-between items-center mb-1"> 
                            <h4 class="text-sm font-semibold flex items-center whitespace-nowrap"><i class="fas fa-window-maximize fa-fw glass-icon ml-1.5 text-ts-blue text-sm"></i>الزجاج الامامي*</h4>
                            <select class="vlt-select w-full p-2 border rounded-md bg-white text-xs mr-2" id="windshield_vlt" name="windshield_vlt"> 
                                <option value="" data-description="" selected>اختر درجة</option>
                                <option value="0.80" data-description="شفاف تمامًا وغير ملحوظ تقريبًا (مطابق للأنظمة)">80%</option>
                                <option value="0.70" data-description="شفاف وبالكاد يٌلاحظ (مطابق للأنظمة)">70%</option>
                            </select>
                        </div>
                        <div class="vlt-description-display" id="windshield_vlt_desc"></div>
                    </div>

                    <div class="glass-tint-section mb-2 pb-2 border-b border-ts-gray-200" id="front-doors-section">
                        <div class="flex justify-between items-center mb-1">
                             <h4 class="text-sm font-semibold flex items-center whitespace-nowrap"><i class="fas fa-car-side fa-fw glass-icon ml-1.5 text-ts-blue text-sm"></i>زجاج البابين الأماميين</h4>
                            <select class="vlt-select w-full p-2 border rounded-md bg-white text-xs mr-2" id="front_doors_vlt" name="front_doors_vlt">
                                <option value="" data-description="" selected>اختر درجة</option>
                                <option value="0.80" data-description="شفاف تمامًا وغير ملحوظ تقريبًا (مطابق للأنظمة)">80%</option>
                                <option value="0.70" data-description="شفاف بالكاد يٌلاحظ (مطابق للأنظمة)">70%</option>
                                <option value="0.50" data-description="تعتيم خفيف توازن أنيق (مطابق للأنظمة)">50%</option>
                                <option value="0.35" data-description="تعتيم متوسط لمسة جمالية راقية (مطابق للأنظمة)">35%</option>
                                <option value="0.25" data-description="تعتيم عالي خصوصية وأناقة ملفتة">25%</option>
                                <option value="0.15" data-description="تعتيم شديد خصوصية عالية جذابة بدون كتم">15%</option>
                                <option value="0.05" data-description="تعتيم تام حجب كامل للرؤية من الخارج للداخل">5%</option>
                            </select>
                        </div>
                        <div class="vlt-description-display" id="front_doors_vlt_desc"></div>
                    </div>
                    
                    <div class="glass-tint-section mb-2 pb-2 border-b border-ts-gray-200" id="rear-doors-section">
                        <div class="flex justify-between items-center mb-1">
                            <h4 class="text-sm font-semibold flex items-center whitespace-nowrap"><i class="fas fa-car-side fa-fw glass-icon ml-1.5 text-ts-blue text-sm" style="transform: scaleX(-1);"></i>زجاج البابين الخلفيين*</h4>
                            <select class="vlt-select w-full p-2 border rounded-md bg-white text-xs mr-2" id="rear_doors_vlt" name="rear_doors_vlt">
                                <option value="0.80" data-description="شفاف تمامًا وغير ملحوظ تقريبًا (مطابق للأنظمة)">80%</option>
                                <option value="0.70" data-description="شفاف بالكاد يٌلاحظ (مطابق للأنظمة)">70%</option>
                                <option value="0.50" data-description="تعتيم خفيف توازن أنيق (مطابق للأنظمة)">50%</option>
                                <option value="0.35" data-description="تعتيم متوسط لمسة جمالية راقية (مطابق للأنظمة)">35%</option>
                                <option value="0.25" data-description="تعتيم عالي خصوصية وأناقة ملفتة">25%</option>
                                <option value="0.15" data-description="تعتيم شديد خصوصية عالية جذابة بدون كتم">15%</option>
                                <option value="0.05" data-description="تعتيم تام حجب كامل للرؤية من الخارج للداخل">5%</option>
                            </select>
                        </div>
                        <div class="vlt-description-display" id="rear_doors_vlt_desc"></div>
                    </div>

                    <div class="glass-tint-section mb-2 pb-2 border-b border-ts-gray-200 hidden" id="rear-quarter-glass-section">
                        <div class="flex justify-between items-center mb-1">
                            <h4 class="text-sm font-semibold flex items-center whitespace-nowrap"><i class="fas fa-vector-square fa-fw glass-icon ml-1.5 text-ts-blue text-sm"></i>زجاج الجوانب الخلفية*</h4>
                            <select class="vlt-select w-full p-2 border rounded-md bg-white text-xs mr-2" id="rear_quarter_vlt" name="rear_quarter_vlt">
                                <option value="" data-description="" selected>اختر درجة</option>
                                <option value="0.80" data-description="شفاف تمامًا غير ملحوظ تقريبًا (مطابق للأنظمة)">80%</option>
                                <option value="0.70" data-description="شفاف بالكاد يٌلاحظ (مطابق للأنظمة)">70%</option>
                                <option value="0.50" data-description="تعتيم خفيف توازن أنيق (مطابق للأنظمة)">50%</option>
                                <option value="0.35" data-description="تعتيم متوسط أنيق لمسة جمالية راقية (مطابق للأنظمة)">35%</option>
                                <option value="0.25" data-description="تعتيم عالي خصوصية وأناقة ملفتة (مطابق للأنظمة)">25%</option>
                                <option value="0.15" data-description="تعتيم شديد خصوصية عالية جذابة بدون كتم">15%</option>
                                <option value="0.05" data-description="تعتيم تام حجب كامل للرؤية من الخارج للداخل">5%</option>
                            </select>
                        </div>
                        <div class="vlt-description-display" id="rear_quarter_vlt_desc"></div>
                    </div>

                    <div class="glass-tint-section mb-2 pb-2 border-b border-ts-gray-200" id="rear-window-section">
                        <div class="flex justify-between items-center mb-1">
                             <h4 class="text-sm font-semibold flex items-center whitespace-nowrap"><i class="fas fa-window-minimize fa-fw glass-icon ml-1.5 text-ts-blue text-sm"></i>الزجاج الخلفي*</h4>
                            <select class="vlt-select w-full p-2 border rounded-md bg-white text-xs mr-2" id="rear_window_vlt" name="rear_window_vlt">
                                <option value="" data-description="" selected>اختر درجة</option>
                                <option value="0.80" data-description="شفاف تمامًا غير ملحوظ تقريبًا (مطابق للأنظمة)">80%</option>
                                <option value="0.70" data-description="شفاف بالكاد يٌلاحظ (مطابق للأنظمة)">70%</option>
                                <option value="0.50" data-description="تعتيم خفيف توازن أنيق (مطابق للأنظمة)">50%</option>
                                <option value="0.35" data-description="تعتيم متوسط أنيق. لمسة جمالية راقية (مطابق للأنظمة)">35%</option>
                                <option value="0.25" data-description="تعتيم عالي خصوصية وأناقة ملفتة">25%</option>
                                <option value="0.15" data-description="تعتيم شديد خصوصية عالية جذابة بدون كتم">15%</option>
                                <option value="0.05" data-description="تعتيم تام حجب كامل للرؤية من الخارج للداخل">5%</option>
                            </select>
                        </div>
                        <div class="vlt-description-display" id="rear_window_vlt_desc"></div>
                    </div>

                    <div class="glass-tint-section mb-2" id="sunroof-section"> 
                        <div class="flex justify-between items-center mb-1">
                            <h4 class="text-sm font-semibold flex items-center whitespace-nowrap"><i class="far fa-sun fa-fw glass-icon ml-1.5 text-ts-blue text-sm"></i>فتحة السقف</h4>
                             <div class="w-full mr-2"> 
                                <label for="sunroof_type" class="block text-xs font-medium text-ts-gray-500 sr-only">نوع فتحة السقف:</label> 
                                <select id="sunroof_type" name="sunroof_type" class="sunroof-type-select vlt-select w-full p-2 border rounded-md bg-white text-xs"> 
                                    <option value="none" data-description="" selected>بدون فتحة سقف</option>
                                    <option value="normal" data-description="فتحة سقف بحجم عادي">عادية</option>
                                    <option value="panoramic" data-description="فتحة سقف بانورامية واسعة">بانورامية</option>
                                </select>
                             </div>
                        </div>
                        <div class="vlt-description-display" id="sunroof_type_desc"></div>
                        
                        <p class="sunroof-note text-xs text-ts-gray-500 mt-1 mb-1.5"><small></small></p> 
                        
                        <div id="sunroof_tint_options_wrapper" class="hidden">
                             <div class="flex justify-between items-center mb-1">
                                <label for="sunroof_vlt" class="text-sm font-semibold flex items-center whitespace-nowrap">تظليل فتحة السقف:</label>
                                <select class="vlt-select w-full p-2 border rounded-md bg-white text-xs mr-2" id="sunroof_vlt" name="sunroof_vlt">
                                    <option value="" data-description="" selected>اختر درجة</option>
                                    <option value="0.80" data-description="شفاف تمامًا لفتحة السقف">80%</option>
                                    <option value="0.70" data-description="شفاف لفتحة السقف">70%</option>
                                    <option value="0.50" data-description="تعتيم خفيف لفتحة السقف">50%</option>
                                    <option value="0.35" data-description="تعتيم متوسط لفتحة السقف">35%</option>
                                    <option value="0.25" data-description="تعتيم عالي لفتحة السقف">25%</option>
                                    <option value="0.15" data-description="تعتيم شديد لفتحة السقف">15%</option>
                                    <option value="0.05" data-description="تعتيم تام لفتحة السقف">5%</option>
                                </select>
                            </div>
                            <div class="vlt-description-display" id="sunroof_vlt_desc"></div>
                        </div>
                    </div>
                </section>
                
                <!-- Price display section -->
                <div id="price-display" class="price-display hidden">
                    <h3>السعر: 599 ريال</h3>
                    <p>تعززيز تميزنا بأن منتجاتنا يتم قصها بالكمبيوتر - وأمريكية</p>
                    
                    <!-- Action buttons -->
                    <div class="action-buttons">
                        <button class="action-btn buy-now-btn" onclick="buyNow()">
                            <i class="fas fa-bolt mr-2"></i>اشتري الآن
                        </button>
                        <button class="action-btn add-to-cart-btn" onclick="addToCart()">
                            <i class="fas fa-shopping-cart mr-2"></i>أضف للسلة
                        </button>
                    </div>
                </div>

                <div class="controls-footer mt-auto pt-3 text-center"> 
                    <button id="nextButton" class="btn-next w-full bg-ts-blue hover:bg-ts-blue-dark text-white font-bold py-2.5 px-5 rounded-lg shadow-md hover:shadow-lg transition-all duration-200" onclick="goToNext()" disabled> 
                        <span class="ml-2 text-sm">استمر في التخصيص</span><i class="fas fa-arrow-left arrow-icon text-xs"></i> 
                    </button>
                </div>
            </aside>

            <div class="simulation-preview-area lg:w-7/12 xl:w-8/12 bg-gradient-to-br from-ts-gray-700 to-ts-gray-900 rounded-xl shadow-xl flex items-center justify-center p-4 md:p-6 relative order-1 lg:order-2 min-h-[350px] sm:min-h-[450px] lg:min-h-[500px]">
                <img loading="lazy" id="previewImage" src="https://placehold.co/800x500/e0e0e0/333?text=اختر+سيارة+للمعاينة&font=cairo" alt="معاينة السيارة المختارة" class="max-w-full max-h-[calc(100vh-12rem)] h-auto object-contain rounded-lg shadow-2xl z-10">
                <div id="tint-overlay" class="absolute inset-0 bg-black/5 rounded-lg z-20 pointer-events-none transition-colors duration-300 ease-in-out" style="background-color: rgba(0,0,0,0.05);"></div>
            </div>
        </main>
        
        <!-- New feature section -->
        <section class="feature-section container mx-auto px-4 py-6">
            <div class="feature-tabs">
                <div class="feature-tab active" data-tab="overview">نظرة عامة</div>
                <div class="feature-tab" data-tab="precision">القص بالكمبيوتر</div>
                <div class="feature-tab" data-tab="specs">المواصفات التقنية</div>
                <div class="feature-tab" data-tab="benefits">المزايا</div>
            </div>
            
            <div class="feature-content active" id="overview-content">
                <div class="feature-icon">
                    <i class="fas fa-globe"></i>
                </div>
                <h3 class="feature-title">نظرة عامة على منتجاتنا</h3>
                <p class="feature-description">
                    تقدم شركة Topshield حلولاً متطورة للحماية والتظليل للسيارات، باستخدام أحدث التقنيات العالمية وأعلى جودة من المواد. نضمن لعملائنا منتجات ذات أداء استثنائي ومتانة طويلة الأمد، مع الحفاظ على جمالية المركبة وتوفير أعلى درجات الخصوصية والراحة.
                </p>
                
                <div class="feature-grid mt-8">
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-medal"></i></div>
                        <h4>جودة عالمية</h4>
                        <p>منتجاتنا مصنوعة وفق أعلى معايير الجودة العالمية ومرخصة من أفضل المنظمات الدولية</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-sun"></i></div>
                        <h4>حماية من الأشعة</h4>
                        <p>تحجب 99% من الأشعة فوق البنفسجية الضارة وتقلل من دخول الحرارة بنسبة تصل إلى 70%</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-shield-alt"></i></div>
                        <h4>حماية متكاملة</h4>
                        <p>توفر حماية شاملة لطلاء السيارة من الخدوش والتلف الناتج عن العوامل الخارجية</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-tools"></i></div>
                        <h4>تركيب احترافي</h4>
                        <p>فريق فنيين مدربين على أعلى مستوى لضمان تركيب مثالي بدون فقاعات أو تشوهات</p>
                    </div>
                </div>
            </div>
            
            <div class="feature-content" id="precision-content">
                <div class="feature-icon">
                    <i class="fas fa-cut"></i>
                </div>
                <h3 class="feature-title">تقنية القص بالكمبيوتر</h3>
                <p class="feature-description">
                    تمتلك شركة Topshield أحدث أنظمة القص بالكمبيوتر التي تضمن دقة قص متناهية لكل جزء من أجزاء السيارة. باستخدام تقنيات المسح ثلاثي الأبعاد والتصميم الرقمي، نضمن تناسبًا تامًا لكل قطعة مع شكل زجاج سيارتك دون الحاجة إلى قص يدوي.
                </p>
                
                <div class="feature-grid mt-8">
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-ruler-combined"></i></div>
                        <h4>دقة متناهية</h4>
                        <p>دقة قص تصل إلى 0.1 مم لضمان تناسب تام مع كل منحنى وزاوية في زجاج السيارة</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-database"></i></div>
                        <h4>قاعدة بيانات شاملة</h4>
                        <p>أكثر من 15,000 نموذج سيارات مخزنة في قاعدة بياناتنا لضمان دقة القص لكل موديل</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-bolt"></i></div>
                        <h4>سرعة التنفيذ</h4>
                        <p>قص جميع أجزاء السيارة في دقائق معدودة مع الحفاظ على أعلى مستويات الدقة</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-recycle"></i></div>
                        <h4>تقليل الهدر</h4>
                        <p>تقنية القص بالكمبيوتر تخفض نسبة الهدر إلى أقل من 3% مقارنة بالقص اليدوي</p>
                    </div>
                </div>
            </div>
            
            <div class="feature-content" id="specs-content">
                <div class="feature-icon">
                    <i class="fas fa-microscope"></i>
                </div>
                <h3 class="feature-title">المواصفات التقنية</h3>
                <p class="feature-description">
                    تتميز أفلام التظليل والحماية من Topshield بمواصفات تقنية فائقة تتفوق على المنافسين. نستخدم مواد عالية الجودة من أصل أمريكي، مع طبقات متعددة تقدم أداءً استثنائياً في الحماية والجمال.
                </p>
                
                <div class="feature-grid mt-8">
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-layer-group"></i></div>
                        <h4>هيكل متعدد الطبقات</h4>
                        <p>7 طبقات متخصصة للحماية من الأشعة، الخدوش، والتلاشي مع مرور الزمن</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-temperature-high"></i></div>
                        <h4>مقاومة الحرارة</h4>
                        <p>تحجب الأشعة تحت الحمراء بنسبة 97% مما يقلل الحرارة داخل السيارة بنسبة 70%</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-shield-virus"></i></div>
                        <h4>حماية الأشعة فوق البنفسجية</h4>
                        <p>حجب 99.9% من الأشعة فوق البنفسجية الضارة لحماية الجلد ومقاعد السيارة</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-car-crash"></i></div>
                        <h4>تعزيز الأمان</h4>
                        <p>طبقة أمان تمنع تحطم الزجاج إلى شظايا حادة في حال الحوادث</p>
                    </div>
                </div>
            </div>
            
            <div class="feature-content" id="benefits-content">
                <div class="feature-icon">
                    <i class="fas fa-star"></i>
                </div>
                <h3 class="feature-title">مزايا منتجاتنا</h3>
                <p class="feature-description">
                    اختيارك لأفلام توب شيلد يعني الاستفادة من مجموعة واسعة من المزايا التي تجمع بين الجمال والأداء والحماية. نقدم لعملائنا تجربة فريدة من نوعها مع ضمانات طويلة الأمد وخدمة ما بعد البيع التي تضمن رضاك التام.
                </p>
                
                <div class="feature-grid mt-8">
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-palette"></i></div>
                        <h4>جمالية لا تقارن</h4>
                        <p>لمسة نهائية سوداء داكنة أنيقة تعزز مظهر سيارتك</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-user-secret"></i></div>
                        <h4>خصوصية عالية</h4>
                        <p>منع الرؤية من الخارج مع الحفاظ على الرؤية الواضحة من الداخل</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-snowflake"></i></div>
                        <h4>توفير الطاقة</h4>
                        <p>تخفيض استهلاك مكيف السيارة بنسبة تصل إلى 30%</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon"><i class="fas fa-award"></i></div>
                        <h4>ضمان طويل الأمد</h4>
                        <p>ضمان يصل إلى 10 سنوات ضد التلاشي، التقشير أو تغير اللون</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Gallery section -->
        <section class="gallery-section container mx-auto">
            <div class="gallery-header">
                <h2>معرض أعمالنا</h2>
                <p>استمتع بمشاهدة أحدث أعمالنا في تظليل السيارات وتجارب عملائنا الراضين عن خدماتنا المتميزة</p>
            </div>
            
            <div class="gallery-grid">
                <div class="gallery-item">
                    <img src="https://placehold.co/600x400/102E6A/ffffff?text=تظليل+سيارة+رياضية&font=cairo" alt="تظليل سيارة رياضية">
                    <div class="gallery-overlay">
                        <h3>تظليل سيارة رياضية</h3>
                        <p>تظليل بنسبة 20% مع حماية من الأشعة فوق البنفسجية</p>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/600x400/0A2351/ffffff?text=تظليل+سيارة+سيدان&font=cairo" alt="تظليل سيارة سيدان">
                    <div class="gallery-overlay">
                        <h3>تظليل سيارة سيدان</h3>
                        <p>تظليل متدرج مع حماية متكاملة للزجاج الأمامي</p>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/600x400/FFC107/102E6A?text=تظليل+دفع+رباعي&font=cairo" alt="تظليل دفع رباعي">
                    <div class="gallery-overlay">
                        <h3>تظليل دفع رباعي</h3>
                        <p>تظليل بنسبة 35% مع حماية من الحرارة</p>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/600x400/374151/ffffff?text=تظليل+شاحنة&font=cairo" alt="تظليل شاحنة">
                    <div class="gallery-overlay">
                        <h3>تظليل شاحنة</h3>
                        <p>حماية متكاملة مع تظليل عالي الخصوصية</p>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/600x400/6B7280/ffffff?text=تظليل+بانورامي&font=cairo" alt="تظليل بانورامي">
                    <div class="gallery-overlay">
                        <h3>تظليل بانورامي</h3>
                        <p>حماية متقدمة للفتحات البانورامية</p>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/600x400/1F2937/ffffff?text=تظليل+فاخر&font=cairo" alt="تظليل فاخر">
                    <div class="gallery-overlay">
                        <h3>تظليل فاخر</h3>
                        <p>تظليل كربوني بجودة عالية للسيارات الفاخرة</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Customer reviews section -->
        <section class="reviews-section container mx-auto">
            <div class="gallery-header">
                <h2>آراء عملائنا</h2>
                <p>اكتشف ما يقوله عملاؤنا الراضون عن خدماتنا وجودة منتجاتنا</p>
            </div>
            
            <div class="feature-grid">
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-avatar">م</div>
                        <div>
                            <h4 class="font-bold">محمد أحمد</h4>
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <div class="review-content">
                        "لقد استخدمت خدمات توب شيلد لتظليل سيارتي الجديدة، والنتيجة كانت مذهلة! الجودة عالية والخدمة ممتازة. أنصح الجميع بتجربة منتجاتهم."
                    </div>
                </div>
                
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-avatar">س</div>
                        <div>
                            <h4 class="font-bold">سارة الخالد</h4>
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <div class="review-content">
                        "الفرق واضح جداً بعد تركيب التظليل من توب شيلد. الحرارة داخل السيارة انخفضت بشكل ملحوظ والخصوصية ممتازة. شكراً لفريق العمل المحترف!"
                    </div>
                </div>
                
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-avatar">ع</div>
                        <div>
                            <h4 class="font-bold">علي عبدالله</h4>
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                        </div>
                    </div>
                    <div class="review-content">
                        "اشتريت تظليل توب شيلد منذ سنتين ولا يزال بحالة ممتازة. الضمان الطويل يمنحني راحة البال. الخدمة بعد البيع ممتازة أيضاً."
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Trust badges -->
        <div class="trust-badges">
            <div class="trust-badge">
                <i class="fas fa-truck"></i>
                <span>شحن سريع</span>
            </div>
            <div class="trust-badge">
                <i class="fas fa-shield-alt"></i>
                <span>ضمان 10 سنوات</span>
            </div>
            <div class="trust-badge">
                <i class="fas fa-lock"></i>
                <span>دفع آمن</span>
            </div>
            <div class="trust-badge">
                <i class="fas fa-headset"></i>
                <span>دعم فني 24/7</span>
            </div>
        </div>
    </div>

    <script>
        let selectedCarInfo = {
            name: null,
            image: null,
            tintVLT: 0.05,
            detailedTints: {}
        };

        const previewImage = document.getElementById('previewImage');
        const tintOverlay = document.getElementById('tint-overlay');
        const tintLabel = document.getElementById('tintLabel');
        const nextButton = document.getElementById('nextButton');
        const alertContainer = document.getElementById('alert-message-container');
        const priceDisplay = document.getElementById('price-display');
        let cartCount = 0;

        // Function to check if all detailed tint options are selected
        function checkDetailedTintCompletion() {
            const requiredSelects = [
                document.getElementById('windshield_vlt'),
                document.getElementById('front_doors_vlt'),
                document.getElementById('rear_doors_vlt'),
                document.getElementById('rear_window_vlt')
            ];
            
            // Add rear quarter glass for SUVs
            if (selectedCarInfo.name === 'عائلية/دفع رباعي') {
                requiredSelects.push(document.getElementById('rear_quarter_vlt'));
            }
            
            // Check sunroof tint if applicable
            const sunroofType = document.getElementById('sunroof_type');
            const sunroofVlt = document.getElementById('sunroof_vlt');
            if (sunroofType.value !== 'none') {
                requiredSelects.push(sunroofVlt);
            }
            
            // Check if all required selects have values
            const allSelected = requiredSelects.every(select => 
                select && select.value !== "" && select.value !== null
            );
            
            // Show/hide price display
            if (allSelected) {
                priceDisplay.classList.remove('hidden');
                priceDisplay.classList.add('animate-pulse');
            } else {
                priceDisplay.classList.add('hidden');
                priceDisplay.classList.remove('animate-pulse');
            }
            
            return allSelected;
        }

        function showTemporaryAlert(message, type = 'error') { 
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert-message alert-${type}`; 
            alertDiv.textContent = message;
            
            alertContainer.innerHTML = ''; 
            alertContainer.appendChild(alertDiv);
            alertContainer.classList.remove('opacity-0', '-translate-y-10');
            alertContainer.classList.add('opacity-100', 'translate-y-0');

            setTimeout(() => {
                alertContainer.classList.remove('opacity-100', 'translate-y-0');
                alertContainer.classList.add('opacity-0', '-translate-y-10');
                setTimeout(() => alertContainer.innerHTML = '', 300);
            }, 3000);
        }

        function applyGeneralTintToPreview(vlt) {
            if (tintOverlay) {
                const overlayOpacity = 1 - vlt;
                tintOverlay.style.backgroundColor = `rgba(0, 0, 0, ${overlayOpacity.toFixed(2)})`;
            }
            if (tintLabel) {
                if (vlt === 1) {
                    tintLabel.textContent = `التظليل العام المختار: بدون`;
                } else {
                    tintLabel.textContent = `التظليل العام المختار: ${Math.round(vlt * 100)}% VLT`;
                }
            }
        }

        function selectTint(vlt, element) {
            selectedCarInfo.tintVLT = vlt;
            applyGeneralTintToPreview(vlt);

            document.querySelectorAll('.tint-button').forEach(el => el.classList.remove('selected-tint'));
            if (element) {
                element.classList.add('selected-tint');
            }
            localStorage.setItem('selectedTintVLT', selectedCarInfo.tintVLT);
        }

        function selectCar(carName, imagePath, element) {
            previewImage.src = imagePath;
            previewImage.alt = "معاينة " + carName;

            selectedCarInfo.name = carName;
            selectedCarInfo.image = imagePath;
            
            document.querySelectorAll('.vehicle-option').forEach(el => el.classList.remove('selected-vehicle'));
            if (element) {
                element.classList.add('selected-vehicle');
            }

            localStorage.setItem('selectedCarName', selectedCarInfo.name);
            localStorage.setItem('selectedCarPreviewImage', selectedCarInfo.image);
            
            nextButton.disabled = false;

            const rearQuarterGlassSection = document.getElementById('rear-quarter-glass-section');
            if (rearQuarterGlassSection) {
                if (carName === 'عائلية/دفع رباعي') {
                    rearQuarterGlassSection.classList.remove('hidden');
                } else {
                    rearQuarterGlassSection.classList.add('hidden');
                    const rearQuarterVltSelect = document.getElementById('rear_quarter_vlt');
                    const rearQuarterDescDisplay = document.getElementById('rear_quarter_vlt_desc');
                    if (rearQuarterVltSelect) { rearQuarterVltSelect.value = ""; }
                    if (rearQuarterDescDisplay) { rearQuarterDescDisplay.textContent = ''; rearQuarterDescDisplay.classList.remove('visible');}
                    if (selectedCarInfo.detailedTints) { delete selectedCarInfo.detailedTints['rear_quarter_vlt']; }
                    localStorage.removeItem('rear_quarter_vlt'); 
                }
            }
            
            // Check tint completion after car change
            checkDetailedTintCompletion();
        }

        function goToNext() {
            if (!selectedCarInfo.name) {
                showTemporaryAlert("الرجاء اختيار فئة السيارة أولاً."); 
                return;
            }
            console.log("Selected Car Info before navigating:", JSON.stringify(selectedCarInfo, null, 2));
            showTemporaryAlert(`تم اختيار ${selectedCarInfo.name}. جاهز للانتقال (الوجهة: customization.html)`, 'success');
        }
        
        function buyNow() {
            showTemporaryAlert("تمت عملية الشراء بنجاح! شكراً لثقتك بتوب شيلد.", 'success');
            // Reset cart count
            cartCount = 0;
            document.querySelector('.cart-count').textContent = cartCount;
        }
        
        function addToCart() {
            cartCount++;
            document.querySelector('.cart-count').textContent = cartCount;
            showTemporaryAlert("تمت إضافة المنتج إلى سلة التسوق!", 'success');
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize feature tabs
            const featureTabs = document.querySelectorAll('.feature-tab');
            featureTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and content
                    featureTabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.feature-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}-content`).classList.add('active');
                });
            });

            const storedCarName = localStorage.getItem('selectedCarName');
            const storedCarImage = localStorage.getItem('selectedCarPreviewImage');
            const storedGeneralTintVLT = localStorage.getItem('selectedTintVLT');
            
            let initialCarName = null;
            let initialCarImage = "https://placehold.co/800x500/e0e0e0/333?text=اختر+سيارة+للمعاينة&font=cairo";
            let initialGeneralTintVLT = 0.05; 

            if (storedCarName && storedCarImage) {
                initialCarName = storedCarName;
                initialCarImage = storedCarImage;
                selectedCarInfo.name = initialCarName;
                selectedCarInfo.image = initialCarImage;
                nextButton.disabled = false;
                const carButtonToSelect = document.querySelector(`.vehicle-option[data-car-name="${initialCarName}"]`);
                if (carButtonToSelect) {
                    selectCar(initialCarName, initialCarImage, carButtonToSelect); 
                }
            } else {
                nextButton.disabled = true;
            }

            if (storedGeneralTintVLT !== null) {
                const parsedVLT = parseFloat(storedGeneralTintVLT);
                const validVLTs = [0.05, 0.15, 0.25, 0.35, 0.50, 0.70, 0.80, 1.00];
                if (validVLTs.includes(parsedVLT)) {
                    initialGeneralTintVLT = parsedVLT;
                }
            }

            previewImage.src = initialCarImage;
            previewImage.alt = initialCarName ? "معاينة " + initialCarName : "اختر سيارة للمعاينة";
            
            let generalTintButtonToSelect = document.querySelector(`.tint-button[data-vlt="${initialGeneralTintVLT.toFixed(2)}"]`);
             if (!generalTintButtonToSelect) { 
                generalTintButtonToSelect = document.querySelector(`.tint-button[data-vlt="${initialGeneralTintVLT}"]`);
            }
            if (generalTintButtonToSelect) {
                selectTint(initialGeneralTintVLT, generalTintButtonToSelect);
            } else {
                const defaultTintButton = document.querySelector('.tint-button[data-vlt="0.05"]');
                if(defaultTintButton) selectTint(0.05, defaultTintButton);
            }
            
            const rearQuarterGlassSection = document.getElementById('rear-quarter-glass-section');
            function updateRearQuarterGlassVisibility(selectedCarName) {
                if (rearQuarterGlassSection) {
                    if (selectedCarName === 'عائلية/دفع رباعي') {
                        rearQuarterGlassSection.classList.remove('hidden');
                    } else {
                        rearQuarterGlassSection.classList.add('hidden');
                    }
                }
            }
            updateRearQuarterGlassVisibility(initialCarName);

            const detailedTintSelects = document.querySelectorAll('.detailed-tint-selection .vlt-select');
            detailedTintSelects.forEach(selectElement => {
                const descriptionDisplayElementId = selectElement.id + '_desc';
                const descriptionDisplayElement = document.getElementById(descriptionDisplayElementId);

                function updateDescriptionDisplay(currentSelect) {
                    if (descriptionDisplayElement) {
                        const selectedOption = currentSelect.options[currentSelect.selectedIndex];
                        const description = selectedOption ? selectedOption.dataset.description : "";
                        if (description && currentSelect.value !== "") {
                            descriptionDisplayElement.textContent = description;
                            descriptionDisplayElement.classList.add('visible');
                        } else {
                            descriptionDisplayElement.textContent = '';
                            descriptionDisplayElement.classList.remove('visible');
                        }
                    }
                }

                const storedDetailedValue = localStorage.getItem(selectElement.id);
                if(storedDetailedValue) {
                    selectElement.value = storedDetailedValue;
                    if (selectElement.id !== 'sunroof_type') { 
                       selectedCarInfo.detailedTints[selectElement.id] = storedDetailedValue;
                    }
                }
                updateDescriptionDisplay(selectElement); 

                selectElement.addEventListener('change', function() {
                    updateDescriptionDisplay(this);
                    
                    if (this.id !== 'sunroof_type') {
                        selectedCarInfo.detailedTints[this.id] = this.value;
                        localStorage.setItem(this.id, this.value);
                    } else { 
                        localStorage.setItem(this.id, this.value);
                        if(this.id === 'sunroof_type') updateSunroofControls();
                    }
                    
                    // Check tint completion on change
                    checkDetailedTintCompletion();
                });
            });

            const sunroofTypeSelect = document.getElementById('sunroof_type');
            const sunroofVltWrapper = document.getElementById('sunroof_tint_options_wrapper');
            const sunroofVltSelect = document.getElementById('sunroof_vlt');
            
            function updateSunroofControls() {
                if(!sunroofTypeSelect || !sunroofVltWrapper || !sunroofVltSelect) return;

                const sunroofVltDescDisplay = document.getElementById('sunroof_vlt_desc'); 

                if (sunroofTypeSelect.value === 'none') {
                    sunroofVltWrapper.classList.add('hidden');
                    sunroofVltSelect.value = ""; 
                    if(sunroofVltDescDisplay) { sunroofVltDescDisplay.textContent = ''; sunroofVltDescDisplay.classList.remove('visible');}
                    if (selectedCarInfo.detailedTints) delete selectedCarInfo.detailedTints[sunroofVltSelect.id]; 
                    localStorage.removeItem(sunroofVltSelect.id);
                } else {
                    sunroofVltWrapper.classList.remove('hidden');
                    const storedSunroofVLT = localStorage.getItem(sunroofVltSelect.id);
                    if (storedSunroofVLT) {
                        sunroofVltSelect.value = storedSunroofVLT;
                        selectedCarInfo.detailedTints[sunroofVltSelect.id] = storedSunroofVLT;
                    }
                    if (sunroofVltSelect.options[sunroofVltSelect.selectedIndex] && sunroofVltDescDisplay) {
                        const selectedSunroofOption = sunroofVltSelect.options[sunroofVltSelect.selectedIndex];
                        const description = selectedSunroofOption.dataset.description;
                         if (description && sunroofVltSelect.value !== "") {
                            sunroofVltDescDisplay.textContent = description;
                            sunroofVltDescDisplay.classList.add('visible');
                        } else {
                            sunroofVltDescDisplay.textContent = '';
                            sunroofVltDescDisplay.classList.remove('visible');
                        }
                    }
                }
                
                // Check tint completion after sunroof change
                checkDetailedTintCompletion();
            }
            
            if (sunroofTypeSelect) {
                const storedSunroofType = localStorage.getItem('sunroof_type');
                if(storedSunroofType) {
                    sunroofTypeSelect.value = storedSunroofType;
                }
                updateSunroofControls(); 
            }

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }
            
            // Initial check for tint completion
            checkDetailedTintCompletion();
        });
    </script>
</body>
</html>